<template>
  <lightning-card>
    <div class="title">Open Repairs</div>
    <template if:true={isAccountsLoading}>
      <div class="loading-screen">
        <lightning-spinner
          alternative-text="Loading..."
          size="medium"
        ></lightning-spinner>
      </div>
    </template>

    <template if:false={isAccountLoading}>
      <div class="filters">
        <c-lookup-input
          data-id="customerLookup"
          label="Name"
          placeholder=""
          onsearch={handleCustomerSearch}
          onselect={handleCustomerSelect}
        ></c-lookup-input>

        <c-lookup-input
          data-id="stationLookup"
          label="Station"
          placeholder=""
          onsearch={handleStationSearch}
          onselect={handleStationSelect}
        ></c-lookup-input>
      </div>

      <template if:true={rows.length}>
        <div class="datatable-container">
          <lightning-datatable
            key-field="id"
            data={rows}
            columns={columns}
            hide-checkbox-column
          ></lightning-datatable>
          <div class="btn-container">
            <lightning-button
              label="Previous"
              onclick={prevPage}
              disabled={isPrevDisabled}
            ></lightning-button>
            <lightning-button
              label="Next"
              onclick={nextPage}
              disabled={isNextDisabled}
            ></lightning-button>
          </div>
        </div>
      </template>
      <template if:false={rows.length}>
        <div class="slds-p-around_medium slds-text-align_center">
          No data found.
        </div>
      </template>
    </template>
  </lightning-card>
</template>
