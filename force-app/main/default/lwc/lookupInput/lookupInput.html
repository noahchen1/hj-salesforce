<template>
  <div>
    <lightning-input
      label={label}
      type="search"
      placeholder={placeholder}
      value={searchKey}
      onchange={handleInputChange}
    ></lightning-input>
    <template if:true={showResultsOrLoading}>
      <ul class="lookup-dropdown" style={dropdownStyle}>
        <template if:true={isLoading}>
          <li class="spinner-container">
            <lightning-spinner
              alternative-text="Loading"
              size="small"
            ></lightning-spinner>
          </li>
        </template>
        <template if:false={isLoading}>
          <template for:each={results} for:item="item">
            <li
              key={item.Id}
              data-id={item.Id}
              data-name={item.Name}
              onclick={handleSelect}
            >
              {item.Name}
            </li>
          </template>
        </template>
      </ul>
    </template>
  </div>
</template>
