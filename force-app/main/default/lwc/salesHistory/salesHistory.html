<template>
  <lightning-card>
    <template if:true={isLoading}>
      <div class="loading-screen">
        <lightning-spinner
          alternative-text="Loading..."
          size="medium"
        ></lightning-spinner>
      </div>
    </template>
    <div class="title">Transaction History</div>
    <div class="filters">
      <c-lookup-input
        data-type="customer"
        label="Customer"
        placeholder="Enter Customer"
        onsearch={handleLookupSearch}
        onselect={handleLookupSelect}
      ></c-lookup-input>
      <c-lookup-input
        data-type="salesRep"
        label="Sales Rep"
        placeholder="Enter Name"
        onsearch={handleLookupSearch}
        onselect={handleLookupSelect}
      ></c-lookup-input>
      <c-lookup-input
        data-type="item"
        label="Item"
        placeholder="Enter Name"
        onsearch={handleLookupSearch}
        onselect={handleLookupSelect}
      ></c-lookup-input>
      <lightning-combobox
        name="division"
        label="Division"
        value={division}
        placeholder="Select"
        options={divisionOptions}
        onchange={handleComboboxChange}
      ></lightning-combobox>
      <lightning-combobox
        name="department"
        label="Merchandise Department"
        value={department}
        placeholder="Select"
        options={departmentOptions}
        onchange={handleComboboxChange}
      ></lightning-combobox>
      <lightning-combobox
        name="groupcode"
        label="Group Code"
        value={groupcode}
        placeholder="Select"
        options={groupcodeOptions}
        onchange={handleComboboxChange}
      ></lightning-combobox>
    </div>
    <template if:true={rows.length}>
      <div class="datatable-container">
        <lightning-datatable
          key-field="id"
          data={rows}
          columns={columns}
          onsort={handleSort}
          sorted-by={sortBy}
          sorted-direction={sortDirection}
          hide-checkbox-column
        ></lightning-datatable>
        <div class="btn-container">
          <lightning-button
            label="Previous"
            onclick={handlePrev}
            disabled={isPrevDisabled}
          ></lightning-button>
          <lightning-button
            label="Next"
            onclick={handleNext}
            disabled={isNextDisabled}
          ></lightning-button>
        </div>
      </div>
    </template>
  </lightning-card>
</template>
